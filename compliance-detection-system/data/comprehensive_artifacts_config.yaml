# Feature Artifact Configuration
# Defines comprehensive artifact types and their relationships

version: "2.0"
description: "Comprehensive feature artifact configuration for compliance detection system"

artifact_types:
  primary:
    title:
      description: "Feature name and unique identifier"
      required: true
      format: "string"
      example: "User Registration System"
    
    description:
      description: "Detailed explanation of feature functionality"
      required: true
      format: "markdown"
      example: "Complete user onboarding flow with age verification and parental consent mechanisms"
    
    prd:
      description: "Product Requirements Document"
      required: true
      format: "markdown"
      location: "data/artifacts/{feature_id}_prd.md"
      version_control: true
    
    trd:
      description: "Technical Requirements Document" 
      required: true
      format: "markdown"
      location: "data/artifacts/{feature_id}_trd.md"
      version_control: true

  design_planning:
    design_docs:
      description: "Architecture and system design documents"
      required: false
      format: ["markdown", "drawio", "pdf"]
      types: ["system_design", "ui_design", "data_design", "security_design"]
    
    user_stories:
      description: "User interaction scenarios and acceptance criteria"
      required: true
      format: "yaml"
      structure:
        - story: "string"
        - acceptance_criteria: "array"
        - priority: "enum[low,medium,high,critical]"
    
    technical_specs:
      description: "Detailed implementation specifications"
      required: false
      format: "markdown"
      includes: ["api_specs", "database_schemas", "security_requirements"]

  implementation:
    config_files:
      description: "Feature configuration and parameter files"
      required: true
      formats: ["yaml", "json", "toml"]
      examples: ["age_verification_config.yaml", "content_classification_rules.json"]
    
    source_code:
      description: "Implementation code with artifact metadata"
      required: true
      format: "python"
      metadata_required: true
      artifact_annotations: true
    
    test_cases:
      description: "Comprehensive testing scenarios"
      required: true
      format: "markdown"
      types: ["unit", "integration", "compliance", "performance", "security"]
      structure:
        - test_id: "string"
        - scenario: "string"
        - expected_outcome: "string"
        - compliance_check: "string"

  compliance_risk:
    risk_assessments:
      description: "Comprehensive risk analysis"
      required: true
      format: "json"
      categories: ["compliance", "technical", "security", "privacy"]
      structure:
        - risk: "string"
        - likelihood: "enum[low,medium,high,critical]"
        - impact: "enum[low,medium,high,critical]"
        - mitigation: "string"
    
    compliance_mappings:
      description: "Regulatory requirement mappings"
      required: true
      format: "json"
      regulations: ["coppa", "gdpr", "ccpa", "utah_social_media_act", "eu_dsa"]
    
    audit_trails:
      description: "Complete compliance logging specifications"
      required: true
      format: "yaml"
      retention_periods: true
      privacy_protections: true

# Feature Categories
feature_categories:
  user_management:
    - user_registration
    - age_verification
    - parental_controls
    - account_deletion
  
  content_systems:
    - content_recommendation
    - content_moderation
    - search_discovery
    - user_generated_content
  
  safety_wellbeing:
    - crisis_intervention
    - mental_health_support
    - bullying_prevention
    - emergency_contacts
  
  privacy_compliance:
    - data_export
    - privacy_settings
    - consent_management
    - data_minimization
  
  communication:
    - messaging_system
    - push_notifications
    - social_connections
    - community_features

# Compliance Requirements by Category
compliance_requirements:
  coppa:
    applicable_features: ["user_registration", "age_verification", "data_collection", "parental_controls"]
    key_requirements:
      - "Verifiable parental consent for users under 13"
      - "Data minimization for child users"
      - "Enhanced privacy protections"
      - "Parental access and control rights"
    
  gdpr:
    applicable_features: ["data_processing", "user_rights", "privacy_settings", "data_export"]
    key_requirements:
      - "Lawful basis for processing"
      - "Data subject rights implementation"
      - "Privacy by design"
      - "Data protection impact assessments"
  
  utah_social_media_act:
    applicable_features: ["user_registration", "age_verification", "parental_controls", "time_restrictions"]
    key_requirements:
      - "Age verification for all users"
      - "Parental approval for minors"
      - "Curfew enforcement (10:30 PM - 6:30 AM)"
      - "Usage time limits"

# Testing Configuration
testing:
  compliance_scenarios:
    coppa:
      - child_registration_consent_required
      - parental_consent_verification
      - child_data_minimization
      - parental_access_rights
    
    gdpr:
      - data_subject_access_request
      - right_to_erasure
      - consent_withdrawal
      - data_portability
    
    utah_act:
      - teen_curfew_enforcement
      - parental_dashboard_access
      - time_limit_enforcement
  
  performance_benchmarks:
    registration_system:
      concurrent_users: [1000, 5000, 10000]
      response_time_targets: ["<500ms", "<1s", "<2s"]
      accuracy_targets: [">99%", ">99.5%", ">99.9%"]
    
    recommendation_engine:
      recommendations_per_second: [1000, 5000, 10000]
      personalization_accuracy: [">85%", ">90%", ">95%"]
      content_safety_accuracy: [">99%", ">99.5%", ">99.9%"]

# Data Generation Settings
data_generation:
  feature_count: 20
  compliance_scenarios_per_regulation: 5
  test_cases_per_feature: 10
  risk_assessments_per_feature: 5
  
  synthetic_data:
    user_profiles: 1000
    content_samples: 5000
    interaction_events: 50000
    compliance_violations: 100
  
  artifact_completeness:
    minimum_required: ["title", "description", "test_cases", "risk_assessment"]
    recommended_complete: ["prd", "trd", "design_docs", "user_stories", "config_files"]
    advanced_optional: ["performance_benchmarks", "security_assessments", "regulatory_mappings"]

# Output Configuration
output:
  formats:
    - csv  # For feature inventories and datasets
    - json # For structured artifact data
    - markdown # For documentation and specifications
    - yaml # For configuration files
  
  locations:
    datasets: "data/"
    artifacts: "data/artifacts/"
    documentation: "documentation/"
    sample_code: "sample_repo/"
  
  naming_conventions:
    features: "{feature_id}_{artifact_type}_{version}.{format}"
    datasets: "{dataset_type}_dataset.{format}"
    documentation: "{doc_type}_{feature_id}.{format}"
